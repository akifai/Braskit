{% extends _base %}
{% set title = "Bans" %}

{% block content %}
	<div class="postarea">
    <section id="add-ban">
      <form action="{{ path("bans", true) }}" method="post" class="">
        <input type="hidden" name="csrf" value="{{ csrf() }}">
        <fieldset>
          <legend>Add ban</legend>
            <div class="control-group">
              <label class="control-label" for="ip">IP address</label>
              <div class="controls">
                <input type="text" name="ip" id="ip" size="22" tabindex="1"{% if ip %} value="{{ ip }}"{% endif %}>
                <input type="submit" value="Add" tabindex="4">
              </div>
            </div>

            <tr>
              <th><label for="reason">Reason</label></th>
              <td><textarea name="reason" id="reason" rows="4" cols="30" tabindex="2"{% if ip %} class="focus_onload"{% endif %}></textarea></td>
            </tr>
            <tr>
              <th><label for="expire">Length</label></th>
              <td>
                <select name="expire" id="expire" tabindex="3">
                  <option value="0" selected>Infinite</option>
                  <option value="259200">3 days</option>
                  <option value="604800">1 week</option>
                  <option value="2592000">1 month</option>
                  <option value="31536000">1 year</option>
                </select>
              </td>
            </tr>
          </tbody></table>
        </fieldset>
      </form>
    </section>
	</div>
	{% if bans %}
    <section id="bans">
      <form action="{{ path("bans", true) }}" method="post">
        <table class="modlist">
          <thead>
            <tr>
              <th class="minimal"></th>
              <th class="minimal">IP address</th>
              <th class="minimal">Expires</th>
              <th>Reason</th>
              <th class="minimal" colspan="2">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for ban in bans %}
              <tr>
                <th class="minimal"><input type="checkbox" name="ban[]" id="ban{{ ban.id }}" value="{{ ban.id }}"></th>
                <td class="minimal"><label for="ban{{ ban.id }}">{{ ban.ip }}</label></td>
                <td class="minimal">{{ ban.expire }}</td>
                <td>{{ ban.reason }}</td>
                {# XXX #}
                <td class="minimal action"><a href="{{ path("bans", { lift: ban.id }) }}">Lift</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <p><input type="submit" value="Lift"></p>
      </form>
    </section>
	{% endif %}
	<hr>
{% endblock %}
