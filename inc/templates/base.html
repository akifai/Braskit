<!DOCTYPE html>
<html>
<head>
  <title>
    {% if title %}{{ title }} - {% endif %}
    {% if board %}
      {% if not title %}/{{ board }}/ - {% endif %}
      {{ board.title }}
    {% else %}
      {{ config.site_name }}
    {% endif %}
  </title>

  <meta charset="utf-8">
  <link rel="stylesheet" id="sitestyle" href="{{ style.getDefault() }}">
  <script>
    var styles = {{ style.getJSON()|raw }};

    function changeStyle(name) {
      var linkEl = document.getElementById("sitestyle");

      if (linkEl)
        linkEl.href = styles[name];
    }

    function Cookie(options) {
      var expires = 86400 * 365;

      if (typeof options === "object" && expires in options) {
        var date = new Date();
        expires = date.setTime(date.getTime() + options.expires);
      }

      this.get = function(name) {
        name = escape(name);

        var regex = new RegExp("(?:^|;\\s+)" + name + "=(.*?)(?:;|$)");
        var match = regex.exec(document.cookie);

        if (!match || match.length < 2)
          return false;

        var value = unescape(match[1]);

        return value;
      };

      this.set = function(name, value) {
        name = escape(name);
        value = escape(value);

        var cookie = name + "=" + value + "; path=/";

        if (expires)
          cookie += "; expires=" + expires;

        document.cookie = cookie;
      };
    }

    !function() {
      var style = new Cookie().get("style");
      if (style)
        changeStyle(style);
    }();
  </script>
</head>
<body{% if js_callbacks %} data-callback="{{ js_callbacks|join(" ") }}"{% endif %}>
  {% include "header.html" %}

  {% block content %}{% endblock %}

  {% include "footer.html" %}

  <script src="{{ path("static/js/jquery-1.9.0.min.js") }}"></script>
  <script src="{{ path("static/js/PlainIB.js") }}"></script>
  {% for js in js_additional %}
    <script src="{{ js }}"></script>
  {% endfor %}
</body>
</html>
